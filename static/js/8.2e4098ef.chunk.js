(this["webpackJsonp@uniswap/interface"]=this["webpackJsonp@uniswap/interface"]||[]).push([[8],{2051:function(e,t,n){},2053:function(e,t,n){},2054:function(e,t,n){},2103:function(e,t,n){"use strict";n.r(t);var c,r=n(23),s=n(3),a=n.n(s),i=n(14),o=n(7),l=n(5),u=n(2),b=n(63),d=n(123),j=n(16),f=n(396),O=n(4),g=n(42),p=n(33),h=n(133),x=n(29),m=n(26),v=n(47),w=n(79),I=n(813),N=n(817),E=n(41),k=n(116),A=n(1),y=n(1112),S=n(87),z=n(9),T=n(819),C=(n(169),n(331),n(2051),n(0)),P=u.default.div.withConfig({componentId:"sc-rcepl8-0"})(["border-top:1px solid ",";color:",";display:flex;flex-direction:column;margin-bottom:8px;padding:12px 16px;border-bottom-left-radius:12px;border-bottom-right-radius:12px;"],(function(e){return e.theme.backgroundOutline}),(function(e){return e.theme.textPrimary})),R=Object(u.default)(y.a).withConfig({componentId:"sc-rcepl8-1"})(["width:14px;margin-right:4px;color:",";"],(function(e){return e.theme.accentWarning})),_=Object(u.default)(z.u.BodyPrimary).withConfig({componentId:"sc-rcepl8-2"})(["align-items:center;color:",";display:flex;justify-content:center;margin:12px 0 !important;text-align:center;"],(function(e){return e.theme.accentWarning})),L=function(e){var t=e.disabled,n=e.children,c=e.onClick;return Object(C.jsx)(v.c,{as:"button",color:"explicitWhite",className:"m29kpj4 rgw6ezcp rgw6ezb1 rgw6ez7lf rgw6ez2l7 rgw6ez24p rgw6ez4jv rgw6ez7fb rgw6ez77v rgw6ezd1 rgw6ez76b rgw6ez441 rgw6ez3q7",disabled:t,onClick:c,children:n})},G=function(e){var t=e.children;return t?Object(C.jsxs)(_,{fontSize:"14px",lineHeight:"20px",children:[Object(C.jsx)(R,{}),t]}):null},B=[E.d.FETCHING_ROUTE,E.d.CONFIRMING_IN_WALLET,E.d.FETCHING_FINAL_ROUTE,E.d.PROCESSING_TRANSACTION],D=function(e){var t=e.totalEthPrice,n=e.totalUsdPrice,c=e.bagStatus,r=e.fetchAssets,s=e.eventProperties,a=Object(S.p)(),i=Object(j.useWeb3React)(),o=i.account,u=i.chainId,b=i.connector,f=Boolean(o&&u),y=Object(I.a)((function(e){return e.setBagExpanded})),R=Object(N.a)().balance,_=Object(A.useMemo)((function(){if(f&&u===x.e.MAINNET)return Object(d.parseEther)(R).gte(t)}),[f,u,R,t]),D=Object(A.useMemo)((function(){var e=r,t=Object(C.jsx)(O.b,{id:"Something went wrong"}),n=!0,s=null;return f&&u!==x.e.MAINNET?(e=function(){return Object(T.a)(b,x.e.MAINNET)},t=Object(C.jsx)(O.b,{id:"Switch networks"}),n=!1,s=Object(C.jsx)(O.b,{id:"Wrong network"})):!1===_?(t=Object(C.jsx)(O.b,{id:"Pay"}),n=!0,s=Object(C.jsx)(O.b,{id:"Insufficient funds"})):c===E.d.WARNING?s=Object(C.jsx)(O.b,{id:"Something went wrong. Please try again."}):f?c===E.d.FETCHING_FINAL_ROUTE||c===E.d.CONFIRMING_IN_WALLET?(n=!0,t=Object(C.jsx)(O.b,{id:"Proceed in wallet"})):c===E.d.PROCESSING_TRANSACTION?(n=!0,t=Object(C.jsx)(O.b,{id:"Transaction pending"})):!0===_&&(n=!1,t=Object(C.jsx)(O.b,{id:"Pay"})):(e=function(){a(),y({bagExpanded:!1})},n=!1,t=Object(C.jsx)(O.b,{id:"Connect wallet"})),{buttonText:t,disabled:n,warningText:s,handleClick:e}}),[c,u,f,b,r,y,_,a]),F=D.buttonText,M=D.disabled,U=D.warningText,H=D.handleClick,W=B.includes(c);return Object(C.jsx)(v.b,{className:"rgw6ez2aj rgw6ez2g1",children:Object(C.jsxs)(P,{children:[Object(C.jsxs)(v.b,{gap:"4",paddingTop:"8",paddingBottom:"20",children:[Object(C.jsxs)(v.c,{justifyContent:"space-between",children:[Object(C.jsx)(m.b,{children:Object(C.jsx)(z.u.HeadlineSmall,{children:"Total"})}),Object(C.jsx)(m.b,{children:Object(C.jsxs)(z.u.HeadlineSmall,{children:[Object(k.p)(t.toString()),"\xa0ETH"]})})]}),Object(C.jsx)(v.c,{justifyContent:"flex-end",color:"textSecondary",className:w.c,children:"".concat(Object(k.i)(n,!0))})]}),Object(C.jsxs)(g.TraceEvent,{events:[p.BrowserEvent.onClick],name:p.EventName.NFT_BUY_BAG_PAY,element:p.ElementName.NFT_BUY_BAG_PAY_BUTTON,properties:Object(l.a)({},s),shouldLogImpression:f&&!M,children:[Object(C.jsx)(G,{children:U}),Object(C.jsxs)(L,{onClick:H,disabled:M,children:[W&&Object(C.jsx)(h.a,{size:"20px",stroke:"white"}),F]})]})]})})},F=n(46),M=n(561),U=n(74),H=n(55),W=n(35),V=n(394),q=n(567),Y=n(259),J=n(2019),Q=n(2015),X=n(154),Z=n(522),K=function(e){var t=e.sectionTitle,n=e.caption,c=void 0===n?void 0:n,r=e.title,s=void 0===r?void 0:r,l=e.rows,u=e.index,b=e.openIndex,d=e.isSuccessScreen,j=void 0!==d&&d,f=Object(A.useState)(!1),O=Object(o.a)(f,2),g=O[0],p=O[1],h=l.some((function(e){return e.status!==E.f.APPROVED})),x=Object(W.m)((function(e){return e.sellAssets})),I=Object(W.m)((function(e){return e.removeAssetMarketplace})),N=function(e){if(1===u){var t,n=Object(F.a)(x);try{for(n.s();!(t=n.n()).done;){var c=t.value;c.asset_contract.address===e.collectionAddress&&I(c,e.marketplace)}}catch(r){n.e(r)}finally{n.f()}}else I(e.asset,e.marketplace)};function k(e){var t,n,c=e,r=c.asset.newListings;return null!==(t=null===r||void 0===r||null===(n=r.find((function(e){return e.marketplace.name===c.marketplace.name})))||void 0===n?void 0:n.price)&&void 0!==t?t:0}Object(A.useEffect)((function(){p(u===b)}),[u,b]);var y=!h&&l.length>0&&!j;return Object(C.jsxs)(v.c,{flexWrap:"wrap",className:w.l,marginTop:"10",marginBottom:"10",onClick:function(){return l.length>0&&p(!g)},color:y?"accentSuccess":"textPrimary",children:[y&&Object(C.jsx)(U.e,{style:{marginRight:"8px"}}),t,!j&&Object(C.jsx)(U.r,{className:Object(X.default)("".concat(g?"":Q.c," ").concat(Q.b))}),(g||j)&&Object(C.jsxs)(v.b,{gap:"12",width:"full",paddingTop:j?"28":"auto",className:Object(X.default)(!j&&Q.e),children:[c&&Object(C.jsx)(m.b,{color:"textPrimary",fontWeight:"normal",className:c,children:c}),s&&Object(C.jsx)(m.b,{color:"textSecondary",className:w.a,children:s}),Object(C.jsx)(v.b,{gap:"8",children:l.map((function(e,t){var n;return Object(C.jsxs)(v.b,{gap:"8",children:[Object(C.jsxs)(v.c,{children:[e.images.map((function(t,n){return Object(C.jsx)(m.b,{as:"img",height:"20",width:"20",borderRadius:0===n&&e.collectionAddress?"round":"4",style:{zIndex:2-n},className:Q.d,src:t,alt:e.name},n)})),Object(C.jsx)(m.b,{marginLeft:"8",marginRight:"auto",fontWeight:"normal",color:"textPrimary",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:{sm:"max",md:e.status===E.f.REJECTED||e.status===E.f.FAILED?"120":"full"},className:w.c,children:e.name}),j?k(e)&&"".concat(Object(Z.c)(Object(Z.g)(null!==(n=k(e))&&void 0!==n?n:0).toString())," ETH"):e.status===E.f.APPROVED?Object(C.jsx)(U.e,{height:"20",width:"20"}):e.status===E.f.FAILED||e.status===E.f.REJECTED?Object(C.jsxs)(v.c,{gap:"4",children:[Object(C.jsx)(m.b,{fontWeight:"normal",fontSize:"14",color:"textSecondary",children:e.status}),Object(C.jsx)(U.A,{})]}):e.status===E.f.SIGNING&&Object(C.jsx)(U.H,{height:"20",width:"20",stroke:"#4673FA"})]}),(e.status===E.f.FAILED||e.status===E.f.REJECTED)&&Object(C.jsxs)(v.c,{gap:"8",justifyContent:"center",children:[Object(C.jsx)(m.b,{width:"120",as:"button",className:w.f,borderRadius:"12",border:"none",color:"red400",height:"32",cursor:"pointer",style:{backgroundColor:"#FA2B391A"},onClick:function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.stopPropagation(),N(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Remove"}),Object(C.jsx)(m.b,{width:"120",as:"button",className:w.f,borderRadius:"12",border:"none",color:"accentAction",height:"32",cursor:"pointer",style:{backgroundColor:"#4C82FB29"},onClick:function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.stopPropagation(),!e.callback){t.next=4;break}return t.next=4,e.callback();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Try again"})]})]},t)}))})]})]})},$=n(2016),ee=function(){var e=Object(j.useWeb3React)().provider,t=Object(W.m)((function(e){return e.sellAssets})),n=null===e||void 0===e?void 0:e.getSigner(),c=Object(W.k)((function(e){return e.listings})),r=Object(W.k)((function(e){return e.setListings})),s=Object(W.k)((function(e){return e.collectionsRequiringApproval})),u=Object(W.k)((function(e){return e.setCollectionsRequiringApproval})),b=Object(A.useState)(0),d=Object(o.a)(b,2),f=d[0],O=d[1],h=Object(W.k)((function(e){return e.listingStatus})),x=Object(W.k)((function(e){return e.setListingStatus})),I=Object(A.useState)(!1),N=Object(o.a)(I,2),k=N[0],y=N[1],S=Object(W.k)((function(e){return e.looksRareNonce})),z=Object(W.k)((function(e){return e.setLooksRareNonce})),T=Object(W.k)((function(e){return e.getLooksRareNonce})),P=Object(W.f)((function(e){return e.toggleBag})),R=Object(A.useRef)(S),_=Object(W.j)(),L=Object(g.useTrace)({modal:p.ModalName.NFT_LISTING});Object(A.useEffect)((function(){W.k.subscribe((function(e){return R.current=e.looksRareNonce}))}),[]);var G=Object(A.useMemo)((function(){return Object($.d)(t)}),[t]),B=Object(A.useState)(0),D=Object(o.a)(B,2),X=D[0],Z=D[1];Object(A.useEffect)((function(){Object(q.a)().then((function(e){Z(e||0)}))}),[]);var ee=Object(l.a)({collection_addresses:t.map((function(e){return e.asset_contract.address})),token_ids:t.map((function(e){return e.tokenId})),marketplaces:Array.from(new Set(c.map((function(e){return e.marketplace.name})))),list_quantity:c.length,usd_value:X*G},L),te=Object(l.a)({list_quantity:c.length,usd_value:X*G},L);Object(A.useEffect)((function(){(null===s||void 0===s?void 0:s.length)&&y(s.every((function(e){return e.status===E.f.APPROVED}))),!k||h!==E.f.PENDING&&h!==E.f.CONTINUE&&h!==E.f.SIGNING||(ie(),se())}),[s,k]);var ne=Object(A.useMemo)((function(){return s.every((function(e){return e.status===E.f.APPROVED||e.status===E.f.PAUSED}))}),[s]),ce=Object(A.useMemo)((function(){return c.every((function(e){return e.status===E.f.APPROVED||e.status===E.f.PAUSED}))}),[c]);Object(A.useEffect)((function(){h===E.f.SIGNING&&ne&&ce&&ie()}),[ne,ce]);var re=function(){var e=Object(i.a)(a.a.mark((function e(){var t,c,r,i,o,b,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return Object(g.sendAnalyticsEvent)(p.EventName.NFT_SELL_START_LISTING,Object(l.a)({},ee)),x(E.f.SIGNING),t=M.b[M.a.MAINNET],e.next=7,n.getAddress();case 7:return c=e.sent,e.next=10,Object(V.j)(c);case 10:r=e.sent,z(null!==r&&void 0!==r?r:0),(null===s||void 0===s?void 0:s.some((function(e){return e.status===E.f.PAUSED})))||(x(E.f.SIGNING),O(1)),i=t.TRANSFER_MANAGER_ERC721,o=Object(F.a)(s),e.prev=15,o.s();case 17:if((b=o.n()).done){e.next=29;break}if(d=b.value,e.t0=Object($.h)(d.status),!e.t0){e.next=27;break}if(!_){e.next=26;break}return e.next=24,Object($.a)(d,s,u,n,i,ae);case 24:e.next=27;break;case 26:Object($.a)(d,s,u,n,i,ae);case 27:e.next=17;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(15),o.e(e.t1);case 34:return e.prev=34,o.f(),e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[15,31,34,37]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var t=Object(i.a)(a.a.mark((function t(){var s,i,o,u,b,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&e){t.next=2;break}return t.abrupt("return");case 2:x(E.f.SIGNING),O(2),i=Object(F.a)(c),t.prev=5,i.s();case 7:if((o=i.n()).done){t.next=15;break}if(u=o.value,t.t0=Object($.h)(u.status),!t.t0){t.next=13;break}return t.next=13,Object($.g)(u,c,r,n,e,T,z,ae);case 13:t.next=7;break;case 15:t.next=20;break;case 17:t.prev=17,t.t1=t.catch(5),i.e(t.t1);case 20:return t.prev=20,i.f(),t.finish(20);case 23:return b=c.every((function(e){return e.status===E.f.APPROVED})),d=c.some((function(e){return e.status===E.f.PAUSED})),b?(O(0),x(E.f.APPROVED)):d||x(E.f.FAILED),Object(g.sendAnalyticsEvent)(p.EventName.NFT_LISTING_COMPLETED,Object(l.a)({signatures_requested:c.length,signatures_approved:c.filter((function(e){return e.status===E.f.APPROVED}))},te)),t.t2=V.i,t.t3=c,t.next=31,null===n||void 0===n?void 0:n.getAddress();case 31:if(t.t5=s=t.sent,t.t4=null!==t.t5,!t.t4){t.next=35;break}t.t4=void 0!==s;case 35:if(!t.t4){t.next=39;break}t.t6=s,t.next=40;break;case 39:t.t6="";case 40:return t.t7=t.t6,t.next=43,(0,t.t2)(t.t3,t.t7);case 43:case"end":return t.stop()}}),t,null,[[5,17,20,23]])})));return function(){return t.apply(this,arguments)}}(),ae=function(){var e,t=Object(F.a)(s);try{for(t.s();!(e=t.n()).done;){var n=e.value;Object($.e)(n,s,u)}}catch(l){t.e(l)}finally{t.f()}var a,i=Object(F.a)(c);try{for(i.s();!(a=i.n()).done;){var o=a.value;Object($.e)(o,c,r)}}catch(l){i.e(l)}finally{i.f()}},ie=function(){var e,t=Object(F.a)(s);try{for(t.s();!(e=t.n()).done;){var n=e.value;Object($.f)(n,s,u)}}catch(l){t.e(l)}finally{t.f()}var a,i=Object(F.a)(c);try{for(i.s();!(a=i.n()).done;){var o=a.value;Object($.f)(o,c,r)}}catch(l){i.e(l)}finally{i.f()}},oe=Object(A.useMemo)((function(){return h===E.f.APPROVED}),[h]);return Object(C.jsx)(g.Trace,{modal:p.ModalName.NFT_LISTING,children:Object(C.jsxs)(v.b,{paddingTop:"20",paddingBottom:"20",paddingLeft:"12",paddingRight:"12",children:[Object(C.jsxs)(v.c,{className:w.k,marginBottom:"10",children:[_&&!oe&&Object(C.jsx)(m.b,{paddingTop:"4",marginRight:"4",onClick:P,children:Object(C.jsx)(U.o,{height:28,width:28})}),oe?"Success!":"Listing ".concat(t.length," NFTs"),Object(C.jsx)(m.b,{as:"button",border:"none",color:"textSecondary",backgroundColor:"backgroundSurface",marginLeft:"auto",marginRight:"0",paddingRight:"0",display:{sm:"flex",md:"none"},cursor:"pointer",onClick:P,children:Object(C.jsx)(U.ab,{height:28,width:28,fill:H.c.colors.textPrimary})})]}),Object(C.jsx)(v.b,{overflowX:"hidden",overflowY:"auto",style:{maxHeight:"60vh"},children:oe?Object(C.jsx)(g.Trace,{name:p.EventName.NFT_LISTING_COMPLETED,properties:Object(l.a)({list_quantity:c.length,usd_value:X*G},L),children:Object(C.jsx)(K,{sectionTitle:"Listed ".concat(c.length," item").concat(Object(Y.a)(c.length)," for sale"),rows:c,index:0,openIndex:f,isSuccessScreen:!0})}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(K,{sectionTitle:"Approve ".concat(s.length," collection").concat(Object(Y.a)(s.length)),title:"COLLECTIONS",rows:s,index:1,openIndex:f}),Object(C.jsx)(K,{sectionTitle:"Confirm ".concat(c.length," listing").concat(Object(Y.a)(c.length)),caption:"Now you can sign to list each item",title:"NFTS",rows:c,index:2,openIndex:f})]})}),Object(C.jsx)("hr",{className:Q.f}),Object(C.jsxs)(v.c,{className:w.l,marginTop:"12",marginBottom:oe?"8":"20",children:["Return if sold",Object(C.jsxs)(v.c,{className:w.m,marginLeft:"auto",marginRight:"0",children:[G,"\xa0ETH"]})]}),oe?Object(C.jsxs)(m.b,{as:"span",className:w.g,color:"textSecondary",children:["Status:"," ",Object(C.jsx)(m.b,{as:"span",color:"accentSuccess",children:"Confirmed"})]}):Object(C.jsx)(J.a,{onClick:function(){ie(),k?se():re()},buttonText:"Start listing",showWarningOverride:_}),(h===E.f.PENDING||h===E.f.SIGNING)&&Object(C.jsx)(m.b,{as:"button",border:"none",backgroundColor:"backgroundSurface",cursor:"pointer",color:"orange",className:Q.a,onClick:function(){ae()},type:"button",children:"Stop listing"})]})})},te=n(621),ne=n(2029),ce=n(1014),re=n(360),se=n(642),ae=n.n(se),ie=(n(2053),"_1jcz50r3 rgw6ez457 rgw6ez3bj rgw6ez3fe rgw6ez151 rgw6ez1bp rgw6ez361 rgw6ez4lp rgw6ez76v rgw6ez4xd rgw6ez7g3 rgw6ez4av"),oe=n(37),le=n(36),ue=Object(u.keyframes)(c||(c=Object(le.a)(["\n  0% {\n    stroke-dashoffset: 1000;\n  }\n  100% {\n    stroke-dashoffset: 0;\n  }\n"]))),be=u.default.circle.withConfig({componentId:"sc-5ix82i-0"})(["stroke-dasharray:1000;stroke-dashoffset:0;-webkit-animation:"," linear;animation:"," linear;animation-duration:160s;stroke:",";"],ue,ue,(function(e){return e.theme.accentAction})),de=function(){return Object(C.jsx)(m.b,{display:"flex",position:"absolute",children:Object(C.jsx)("svg",{height:"18px",width:"18px",children:Object(C.jsx)(be,{strokeWidth:"".concat(1.5),strokeLinecap:"round",style:{transform:"rotate(90deg)",transformOrigin:"50% 50%"},fill:"transparent",r:"8px",cx:"9px",cy:"9px"})})})},je=n(121),fe=n(265),Oe=n(64),ge=(n(2054),"_1kuawc1 rgw6ez2a7 rgw6ez2fp rgw6ez2kv rgw6ez24d rgw6ez4av rgw6ez3pv rgw6ez76b rgw6ez1bp rgw6ez77v"),pe="rgw6ez12p rgw6ez19d rgw6ez461 rgw6ez77n",he="_1kuawc7",xe="_1kuawcb rgw6ezb1 rgw6ezcv rgw6ez7if rgw6ez427 rgw6ez421",me="rgw6ezcp rgw6ezav rgw6ez7lb rgw6ez7if rgw6ez421 rgw6ez427 rgw6ez4b1",ve="rgw6ez3u7",we=Object(u.default)(oe.q).withConfig({componentId:"sc-iebvtt-0"})(["border-radius:12px;font-size:14px;line-height:16px;margin-left:16px;padding:12px 14px;"]),Ie=Object(u.default)(oe.q).withConfig({componentId:"sc-iebvtt-1"})(["border-radius:12px;flex:1 1 auto;font-size:14px;padding:8px;width:50%;"]),Ne=u.default.div.withConfig({componentId:"sc-iebvtt-2"})(["position:absolute;display:block;right:-11px;top:-11px;z-index:1;transition:250ms;width:45px;height:45px;display:flex;align-items:center;justify-content:center;"]),Ee=function(e){var t=e.onClick;return Object(C.jsx)(Ne,{onClick:t,children:Object(C.jsx)(U.s,{})})},ke=function(){return Object(C.jsx)(m.b,{position:"relative",background:"loadingBackground",className:pe,children:Object(C.jsxs)(m.b,{position:"absolute",textAlign:"center",left:"1/2",top:"1/2",style:{transform:"translate3d(-50%, -50%, 0)"},color:"gray500",fontSize:"12",fontWeight:"normal",children:["Image",Object(C.jsx)("br",{}),"not",Object(C.jsx)("br",{}),"available"]})})},Ae=function(e){var t,n=e.asset,c=e.usdPrice,r=e.removeAsset,s=e.showRemove,a=e.grayscale,i=e.isMobile,l=Object(A.useState)(!1),u=Object(o.a)(l,2),b=u[0],j=u[1],f=Object(A.useState)(!n.smallImageUrl),O=Object(o.a)(f,2),g=O[0],p=O[1],h=Object(A.useState)(!1),x=Object(o.a)(h,2),w=x[0],I=x[1],N=Object(A.useCallback)((function(){return I(!0)}),[]),E=Object(A.useCallback)((function(){return I(!1)}),[]),y=Boolean(s&&w&&!i),S=n.updatedPriceInfo?n.updatedPriceInfo.ETHPrice:n.priceInfo.ETHPrice,z=Object(k.p)(S),T=Object(k.i)(c?parseFloat(Object(d.formatEther)(S))*c:c,!0),P=Object(A.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),r([n])}),[n,r]);return Object(C.jsx)(Oe.b,{to:Object(k.s)(n),style:{textDecoration:"none"},children:Object(C.jsxs)(v.c,{className:ge,onMouseEnter:N,onMouseLeave:E,children:[Object(C.jsxs)(m.b,{position:"relative",display:"flex",children:[s&&i&&Object(C.jsx)(Ee,{onClick:P}),!g&&Object(C.jsx)(m.b,{as:"img",src:n.smallImageUrl,alt:n.name,className:Object(X.default)(pe,a&&!w&&he),onLoad:function(){j(!0)},onError:function(){p(!0)},visibility:b?"visible":"hidden"}),!b&&Object(C.jsx)(m.b,{position:"absolute",className:"".concat(pe," ").concat(fe.b)}),g&&Object(C.jsx)(ke,{})]}),Object(C.jsxs)(v.b,{overflow:"hidden",width:"full",color:a?"textSecondary":"textPrimary",children:[Object(C.jsxs)(v.c,{overflow:"hidden",width:"full",whiteSpace:"nowrap",children:[Object(C.jsx)(m.b,{className:xe,children:null!==(t=n.name)&&void 0!==t?t:"#".concat(n.tokenId)}),n.susFlag&&Object(C.jsx)(je.s,{})]}),Object(C.jsxs)(v.c,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[Object(C.jsx)(m.b,{className:me,children:n.collectionName}),n.collectionIsVerified&&Object(C.jsx)(U.Z,{className:ve})]})]}),y&&Object(C.jsx)(we,{onClick:P,emphasis:oe.e.medium,size:oe.n.medium,children:"Remove"}),(!y||i)&&Object(C.jsxs)(v.b,{flexShrink:"0",alignItems:"flex-end",children:[Object(C.jsxs)(m.b,{className:"_1kuawc9 rgw6ez3p7 rgw6ezb1 rgw6ezd1 rgw6ez3u7",children:[z,"\xa0ETH"]}),Object(C.jsx)(m.b,{className:me,children:T})]})]})})},ye=function(e){var t,n=e.asset,c=e.usdPrice,r=e.markAssetAsReviewed,s=e.top,a=e.isMobile,i=b.a.from(null===(t=n.updatedPriceInfo)||void 0===t?void 0:t.ETHPrice).gt(b.a.from(n.priceInfo.ETHPrice)),o=Object(A.useCallback)((function(e){e.preventDefault(),e.stopPropagation();r(n,!1)}),[n,r]),l=Object(A.useCallback)((function(e){e.preventDefault(),e.stopPropagation();r(n,!0)}),[n,r]);return Object(C.jsxs)(v.b,{className:"rgw6ez2lj rgw6ez251 rgw6ezjv rgw6ezpd rgw6ez4ov rgw6ez3pj rgw6ez4av rgw6ez76n rgw6ez7g3 rgw6ez50j rgw6ez5l1 rgw6ez1bp rgw6ez76b",borderTopColor:s?"backgroundOutline":"transparent",children:[Object(C.jsxs)(v.c,{className:"rgw6ezcp rgw6ezav rgw6ez7lb rgw6ez48p rgw6ez3p7",children:[i?Object(C.jsx)(U.S,{}):Object(C.jsx)(U.R,{}),Object(C.jsx)(m.b,{children:"Price ".concat(i?"increased":"decreased"," from ").concat(Object(k.p)(n.priceInfo.ETHPrice)," ETH")})]}),Object(C.jsx)(m.b,{style:{marginLeft:"-8px",marginRight:"-8px"},children:Object(C.jsx)(Ae,{asset:n,usdPrice:c,removeAsset:function(){},isMobile:a})}),Object(C.jsxs)(v.c,{gap:"8",justifyContent:"space-between",children:[Object(C.jsx)(Ie,{onClick:o,emphasis:oe.e.medium,size:oe.n.small,children:"Remove"}),Object(C.jsx)(Ie,{onClick:l,emphasis:oe.e.high,size:oe.n.small,children:"Keep"})]})]})},Se=function(e){var t=e.assets;return Object(C.jsx)(v.b,{display:"grid",style:{gridTemplateColumns:"repeat(".concat(t.length,", 20px)"),width:"".concat(32+20*(t.length-1),"px")},children:t.map((function(e,t){return Object(C.jsx)(m.b,{as:"img",src:e.smallImageUrl,width:"32",height:"32",borderStyle:"solid",borderWidth:"1px",borderColor:"backgroundSurface",borderRadius:"4",style:{zIndex:t},className:he},"".concat(e.address,"-").concat(e.tokenId))}))})},ze=function(e){var t=e.assets,n=e.usdPrice,c=e.clearUnavailableAssets,r=e.didOpenUnavailableAssets,s=e.setDidOpenUnavailableAssets,a=e.isMobile,i=Object(A.useReducer)((function(e){return!e}),!1),l=Object(o.a)(i,2),u=l[0],b=l[1],d=Object(A.useState)(8),j=Object(o.a)(d,2),f=j[0],O=j[1];if(Object(A.useEffect)((function(){if(f){var e=setInterval((function(){O(f-1)}),1e3);return function(){return clearInterval(e)}}r||(c(),s(!1))}),[f,c,r,s]),!t||0===t.length)return null;var g=t.length>1,p=u||!g;return Object(C.jsx)(v.b,{className:"rgw6ez2lj rgw6ez251 rgw6ezjv rgw6ezpd rgw6ez4ov rgw6ez3pv rgw6ez4av rgw6ez76n rgw6ez7g3 rgw6ez50j rgw6ez5wv rgw6ez5l1 rgw6ez1bp",children:Object(C.jsxs)(v.b,{children:[Object(C.jsxs)(v.c,{justifyContent:"space-between",marginBottom:p?"12":"0",cursor:g?"pointer":"default",onClick:function(){g&&(!r&&s(!0),b())},children:[Object(C.jsxs)(v.c,{gap:"12",color:"textSecondary",className:w.c,children:[!p&&Object(C.jsx)(Se,{assets:t.slice(0,5)}),"No longer available"]}),g&&Object(C.jsx)(v.c,{color:"textSecondary",children:u?Object(C.jsx)(U.q,{}):Object(C.jsx)(U.n,{})}),!r&&Object(C.jsxs)(v.c,{position:"relative",width:"20",height:"20",color:"textPrimary",justifyContent:"center",cursor:"pointer",onClick:c,children:[Object(C.jsx)(de,{}),Object(C.jsx)(U.t,{})]})]}),Object(C.jsx)(v.b,{gap:"8",style:{marginLeft:"-8px",marginRight:"-8px"},children:p&&t.map((function(e){return Object(C.jsx)(Ae,{asset:e,usdPrice:n,removeAsset:function(){},grayscale:!0,isMobile:a},e.id)}))})]})})},Te=function(){var e=Object(W.f)((function(e){return e.bagStatus})),t=Object(W.f)((function(e){return e.setBagStatus})),n=Object(W.f)((function(e){return e.markAssetAsReviewed})),c=Object(W.f)((function(e){return e.didOpenUnavailableAssets})),r=Object(W.f)((function(e){return e.setDidOpenUnavailableAssets})),s=Object(W.f)((function(e){return e.itemsInBag})),a=Object(W.f)((function(e){return e.setItemsInBag})),i=Object(W.f)((function(e){return e.removeAssetsFromBag})),o=Object(W.j)(),u=Object(A.useMemo)((function(){return Object(k.F)(s)}),[s]),b=Object(re.useQuery)(["fetchPrice",{}],(function(){return Object(k.k)()}),{}).data,d=Object(A.useMemo)((function(){return{unchangedAssets:u.filter((function(e){return e.status===E.c.ADDED_TO_BAG||e.status===E.c.REVIEWED})).map((function(e){return e.asset})),priceChangedAssets:u.filter((function(e){return e.status===E.c.REVIEWING_PRICE_CHANGE})).map((function(e){return e.asset})),unavailableAssets:u.filter((function(e){return e.status===E.c.UNAVAILABLE})).map((function(e){return e.asset})),availableItems:u.filter((function(e){return e.status!==E.c.UNAVAILABLE}))}}),[u]),j=d.unchangedAssets,f=d.priceChangedAssets,O=d.unavailableAssets,h=d.availableItems;return Object(A.useEffect)((function(){var n=f.length>0,c=u.length>0;n&&Object(g.sendAnalyticsEvent)(p.EventName.NFT_BUY_BAG_CHANGED,Object(l.a)({usd_value:b,bag_quantity:u},Object(k.l)(f))),e!==E.d.IN_REVIEW||n||t(c?E.d.CONFIRM_REVIEW:E.d.ADDING_TO_BAG),e!==E.d.CONFIRM_REVIEW||c||t(E.d.ADDING_TO_BAG)}),[e,u,f,t,b]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(v.b,{display:f.length>0||O.length>0?"flex":"none",children:[O.length>0&&Object(C.jsx)(g.Trace,{name:p.EventName.NFT_BUY_BAG_CHANGED,properties:Object(l.a)({usd_value:b,bag_quantity:u.length},Object(k.l)(O)),shouldLogImpression:!0,children:Object(C.jsx)(ze,{assets:O,usdPrice:b,clearUnavailableAssets:function(){return a(h)},didOpenUnavailableAssets:c,setDidOpenUnavailableAssets:r,isMobile:o})}),f.map((function(e,t){return Object(C.jsx)(ye,{asset:e,usdPrice:b,markAssetAsReviewed:n,top:0===t&&0===O.length,isMobile:o},e.id)}))]}),Object(C.jsx)(v.b,{gap:"8",children:j.slice(0).reverse().map((function(e){return Object(C.jsx)(Ae,{asset:e,usdPrice:b,removeAsset:i,showRemove:!0,isMobile:o},e.id)}))})]})},Ce=n(291),Pe=Object(u.default)(z.c).withConfig({componentId:"sc-bq6y8h-0"})(["color:",";cursor:pointer;font-weight:600;font-size:14px;line-height:16px;:active{text-decoration:none;}"],(function(e){return e.theme.textSecondary})),Re=u.default.button.withConfig({componentId:"sc-bq6y8h-1"})(["align-items:center;background-color:transparent;border-radius:8px;border:none;color:",";cursor:pointer;display:flex;flex-direction:row;justify-content:flex-end;margin-left:auto;padding:2px;opacity:1;",""],(function(e){return e.theme.textPrimary}),Ce.a),_e=u.default.div.withConfig({componentId:"sc-bq6y8h-2"})(["align-items:center;background-color:",";border-radius:100px;font-weight:bold;color:",";display:flex;font-size:10px;justify-content:center;min-width:",";min-height:",";padding:4px 6px;"],(function(e){return e.theme.accentAction}),(function(e){return e.theme.accentTextLightPrimary}),(function(e){return e.sizing}),(function(e){return e.sizing})),Le=u.default.div.withConfig({componentId:"sc-bq6y8h-3"})(["align-items:center;display:flex;flex-direction:row;gap:8px;justify-content:flex-start;margin:16px 20px;text-align:center;"]),Ge=function(e){var t=e.numberOfAssets,n=e.closeBag,c=e.resetFlow,r=e.isProfilePage,s=Object(A.useMemo)((function(){return function(e){var t=e.toString().length;return"".concat(14+6*t,"px")}(t)}),[t]);return Object(C.jsxs)(Le,{children:[Object(C.jsx)(z.u.HeadlineSmall,{children:r?Object(C.jsx)(O.b,{id:"Sell"}):Object(C.jsx)(O.b,{id:"Bag"})}),t>0&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(_e,{sizing:s,children:t}),Object(C.jsx)(Pe,{onClick:c,children:"Clear all"})]}),Object(C.jsx)(Re,{onClick:n,children:Object(C.jsx)(U.j,{})})]})},Be=Object(u.default)(v.b).withConfig({componentId:"sc-xhr1rt-0"})(["gap:12px;margin-top:68px;"]),De=function(){var e=Object(f.c)();return Object(C.jsxs)(Be,{children:[Object(C.jsx)(v.a,{children:e?Object(C.jsx)(U.F,{color:H.c.colors.textTertiary}):Object(C.jsx)(U.k,{color:H.c.colors.textTertiary,height:"96px",width:"96px",strokeWidth:"1px"})}),e?Object(C.jsx)(v.a,{className:w.l,children:"No NFTs selected"}):Object(C.jsxs)(v.b,{gap:"16",children:[Object(C.jsx)(v.a,{"data-testid":"nft-empty-bag",className:w.l,style:{lineHeight:"24px"},children:"Your bag is empty"}),Object(C.jsx)(v.a,{fontSize:"12",fontWeight:"normal",color:"textSecondary",style:{lineHeight:"16px"},children:"Selected NFTs will appear here"})]})]})},Fe=function(e){var t=e.asset,n=Object(W.m)((function(e){return e.removeSellAsset})),c=Object(W.j)(),r=Object(A.useState)(!1),s=Object(o.a)(r,2),a=s[0],i=s[1],l=function(){return i(!a)},u=function(e){e.preventDefault(),e.stopPropagation(),n(t)};return Object(C.jsxs)(v.c,{className:ge,onMouseEnter:l,onMouseLeave:l,children:[Object(C.jsxs)(m.b,{position:"relative",display:"flex",children:[c&&Object(C.jsx)(Ee,{onClick:u}),Object(C.jsx)("img",{src:t.smallImageUrl,alt:t.name,className:pe})]}),Object(C.jsxs)(v.b,{overflow:"hidden",width:"full",color:"textPrimary",children:[Object(C.jsx)(v.c,{overflow:"hidden",width:"full",justifyContent:"space-between",whiteSpace:"nowrap",gap:"16",children:Object(C.jsx)(m.b,{className:xe,children:t.name||"#".concat(t.tokenId)})}),Object(C.jsxs)(v.c,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[Object(C.jsx)(m.b,{className:me,children:t.asset_contract.name}),t.collectionIsVerified&&Object(C.jsx)(U.Z,{className:ve})]})]}),a&&!c&&Object(C.jsx)(we,{onClick:u,emphasis:oe.e.medium,size:oe.n.medium,children:"Remove"})]})},Me=function(){var e=Object(W.m)((function(e){return e.sellAssets}));return Object(C.jsx)(v.b,{children:e.length?e.map((function(e,t){return Object(C.jsx)(Fe,{asset:e},t)})):null})},Ue=u.default.div.withConfig({componentId:"sc-1cpp7nx-0"})(["position:fixed;background:rgba(0,0,0,0.7);top:72px;width:100%;height:100%;"]),He=function(e){var t=e.top,n=e.show;return Object(C.jsx)(m.b,{marginX:"16",borderWidth:"1px",borderStyle:"solid",borderColor:"transparent",borderTopColor:t?"transparent":"backgroundOutline",borderBottomColor:t?"backgroundOutline":"transparent",opacity:n?"1":"0",transition:"250"})};t.default=function(){var e=Object(j.useWeb3React)(),t=e.account,n=e.provider,c=Object(W.m)((function(e){return{resetSellAssets:e.reset,sellAssets:e.sellAssets}}),ae.a),s=c.resetSellAssets,u=c.sellAssets,O=Object(W.l)((function(e){var t=e.setProfilePageState;return{profilePageState:e.state,setProfilePageState:t}}),ae.a),g=O.profilePageState,p=O.setProfilePageState,h=Object(W.f)((function(e){return Object(l.a)(Object(l.a)({},e),{},{bagIsLocked:e.isLocked,uncheckedItemsInBag:e.itemsInBag})}),ae.a),x=h.bagStatus,I=h.setBagStatus,N=h.didOpenUnavailableAssets,y=h.setDidOpenUnavailableAssets,S=h.bagIsLocked,z=h.setLocked,T=h.reset,P=h.setItemsInBag,R=h.bagExpanded,_=h.toggleBag,L=h.setTotalEthPrice,G=h.setTotalUsdPrice,B=h.setBagExpanded,F=Object(W.f)((function(e){return{uncheckedItemsInBag:e.itemsInBag}})).uncheckedItemsInBag,M=Object(f.c)(),U=Object(f.a)(),H=Object(f.b)(),q=Object(W.j)(),Y=Object(W.n)((function(e){return e.sendTransaction})),J=Object(W.n)((function(e){return e.state})),Q=Object(W.n)((function(e){return e.setState})),X=Object(A.useRef)(J),Z=Object(W.o)((function(e){return[e.setTransactionResponse]})),K=Object(o.a)(Z,1)[0],$=Object(re.useQueryClient)(),se=Object(A.useMemo)((function(){return Object(k.F)(F)}),[F]),oe=Object(A.useState)(!1),le=Object(o.a)(oe,2),ue=le[0],be=le[1],de=Object(A.useState)(!1),je=Object(o.a)(de,2),fe=je[0],Oe=je[1],ge=Object(A.useState)(0),pe=Object(o.a)(ge,2),he=pe[0],xe=pe[1],me=Object(re.useQuery)(["fetchPrice",{}],(function(){return Object(k.k)()}),{}).data,ve=Object(A.useMemo)((function(){var e=se.reduce((function(e,t){return t.status!==E.c.UNAVAILABLE?e.add(b.a.from(t.asset.updatedPriceInfo?t.asset.updatedPriceInfo.ETHPrice:t.asset.priceInfo.ETHPrice)):e}),b.a.from(0));return{totalEthPrice:e,totalUsdPrice:me?parseFloat(Object(d.formatEther)(e))*me:void 0}}),[se,me]),we=ve.totalEthPrice,Ie=ve.totalUsdPrice,Ne=function(){var e=Object(i.a)(a.a.mark((function e(t){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Y(null===n||void 0===n?void 0:n.getSigner(),se.filter((function(e){return e.status!==E.c.UNAVAILABLE})).map((function(e){return e.asset})),t);case 4:!(c=e.sent)||X.current!==E.l.Success&&X.current!==E.l.Failed||(z(!1),be(!1),K(c),B({bagExpanded:!1}),T());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=Object(A.useCallback)((function(){B({bagExpanded:!1,manualClose:!0})}),[B]),ke=function(){var e=Object(i.a)(a.a.mark((function e(){var n,c,s,i,o,l,u,d,j,f,O,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=se.filter((function(e){return e.status!==E.c.UNAVAILABLE})).map((function(e){return e.asset})),c=Object(k.b)(n.reduce((function(e,t){return e.add(b.a.from(t.priceInfo.ETHPrice))}),b.a.from(0)).toString()),N&&y(!1),!S&&z(!0),I(E.d.FETCHING_ROUTE),e.prev=5,e.next=8,$.fetchQuery(["assetsRoute",c,n,t],(function(){return Object(V.f)({toSell:[c],toBuy:n,senderAddress:null!==t&&void 0!==t?t:""})}));case 8:s=e.sent,i=Object(ce.a)(n,s.route),o=i.filter((function(e){return e.updatedPriceInfo})).sort(k.H),l=i.filter((function(e){return e.isUnavailable})),u=i.filter((function(e){return!e.updatedPriceInfo&&!e.isUnavailable})),d=u.length>0,j=o.length>0,f=l.length>0,O=d||j||f,g=j||f,P([].concat(Object(r.a)(l.map((function(e){return{asset:e,status:E.c.UNAVAILABLE}}))),Object(r.a)(o.map((function(e){return{asset:e,status:E.c.REVIEWING_PRICE_CHANGE}}))),Object(r.a)(u.map((function(e){return{asset:e,status:E.c.REVIEWED}}))))),z(!1),O?g?I(j?E.d.IN_REVIEW:E.d.CONFIRM_REVIEW):(Ne(s),I(E.d.CONFIRMING_IN_WALLET)):I(E.d.ADDING_TO_BAG),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(5),I(E.d.ADDING_TO_BAG);case 26:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(){return e.apply(this,arguments)}}();Object(A.useEffect)((function(){W.n.subscribe((function(e){return X.current=e.state}))}),[]),Object(A.useEffect)((function(){S&&!ue&&be(!0)}),[S,ue]),Object(A.useEffect)((function(){X.current===E.l.Confirming&&I(E.d.PROCESSING_TRANSACTION),X.current!==E.l.Denied&&X.current!==E.l.Invalid||(X.current===E.l.Invalid?I(E.d.WARNING):I(E.d.CONFIRM_REVIEW),Q(E.l.New),z(!1),be(!1))}),[X.current]),Object(A.useEffect)((function(){L(we),G(Ie)}),[we,Ie,L,G]);var Ae=se.length>0,ye=se.length>0,Se=u.length>0,ze=Boolean(!M&&!ye&&x===E.d.ADDING_TO_BAG||M&&!Se),Ce=Object(A.useMemo)((function(){return Object(l.a)({usd_value:Ie},Object(k.l)(se.map((function(e){return e.asset}))))}),[se,Ie]);return R&&H?Object(C.jsxs)(te.a,{children:[M&&g===E.i.LISTING?Object(C.jsx)(v.b,{zIndex:q||ue?"modalOverTooltip":"3",className:ie,children:Object(C.jsx)(ee,{})}):Object(C.jsxs)(v.b,{zIndex:q||ue?"modalOverTooltip":"3",className:ie,children:[Object(C.jsx)(Ge,{numberOfAssets:M?u.length:se.length,closeBag:Ee,resetFlow:M?s:T,isProfilePage:M}),ze&&Object(C.jsx)(De,{}),Object(C.jsx)(He,{top:!0,show:fe&&he>0}),Object(C.jsx)(v.b,{ref:function(e){if(null!==e){var t=e.scrollHeight>e.clientHeight;t!==fe&&Oe(t)}},className:"_1jcz50r1 rgw6ez2aj rgw6ez2g1 rgw6ez1vp rgw6ez7jr",onScroll:function(e){var t=e.currentTarget.scrollTop,n=e.currentTarget.clientHeight,c=e.currentTarget.scrollHeight;xe(t?(t+n)/c*100:0)},gap:"12",children:M?Object(C.jsx)(Me,{}):Object(C.jsx)(Te,{})}),Ae&&!M&&Object(C.jsx)(D,{totalEthPrice:we,totalUsdPrice:Ie,bagStatus:x,fetchAssets:ke,eventProperties:Ce}),Se&&M&&Object(C.jsx)(m.b,{marginTop:"32",marginX:"28",paddingY:"10",className:"".concat(w.e," ").concat(w.h),backgroundColor:"accentAction",color:"white",textAlign:"center",onClick:function(){q&&_(),p(E.i.LISTING)},children:"Continue"})]}),U?Object(C.jsx)(Ue,{onClick:_}):ue&&Object(C.jsx)(ne.a,{onClick:function(){return S?void 0:be(!1)}})]}):null}}}]);
//# sourceMappingURL=8.2e4098ef.chunk.js.map